<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><script defer src=https://cloud.umami.is/script.js data-website-id=8b22d943-0df9-427d-ad8f-5760116fbaab></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>Be inspired or be DESTROYED - daily wholesomeness in your terminal | khalid.se</title><meta name=keywords content="Mastodon,CLI,Inspiration"><meta name=description content="Following this guide, you&rsquo;ll have the latest wholesome mastodon post printed when you open your shell.
Be inspired or be DESTROYED!
Prerequisites
The following applications must be present on the system and in your $PATH:

curl
jq

Fetching statuses from the terminal
Since the response from Mastodon is delivered as a JSON-array, having jq installed will help greatly with parsing the content. Mastodon has support for alt-text on images, and the user @skeletor@mas.to is kind enough to provide that with each posted image which makes it trivial to fetch the latest wholesome inspirational quote, even though the quote is images with text. This is accomplished by the following command:"><meta name=author content><link rel=canonical href=http://localhost:1313/posts/2024-07-06_get_inspired/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/2024-07-06_get_inspired/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="khalid.se (Alt + H)">khalid.se</a><div class=logo-switches></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Be inspired or be DESTROYED - daily wholesomeness in your terminal</h1><div class=post-meta><span title='2024-07-06 00:00:00 +0000 UTC'>July 6, 2024</span></div></header><div class=post-content><p>Following this guide, you&rsquo;ll have the latest wholesome mastodon post printed when you open your shell.</p><p><strong>Be inspired or be DESTROYED!</strong></p><h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h2><p>The following applications must be present on the system and in your $PATH:</p><ul><li><code>curl</code></li><li><code>jq</code></li></ul><h2 id=fetching-statuses-from-the-terminal>Fetching statuses from the terminal<a hidden class=anchor aria-hidden=true href=#fetching-statuses-from-the-terminal>#</a></h2><p>Since the response from Mastodon is delivered as a JSON-array, having <code>jq</code> installed will help greatly with parsing the content. Mastodon has support for alt-text on images, and the user <code>@skeletor@mas.to</code> is kind enough to provide that with each posted image which makes it trivial to fetch the latest wholesome inspirational quote, even though the quote is images with text. This is accomplished by the following command:</p><p><code>curl -s https://mas.to/api/v1/accounts/109308492833993188/statuses?limit=1 | jq -r '.[] | .media_attachments[] | select(.description != null) | .description'</code></p><p>Getting a quote every time your start your terminal with bash is easy enough, just append the line above to your <code>~/.bashrc</code></p><p><code>echo >> "# Get the latest inspirational quote from @skeletor@mas.to" >> ~/.bashrc</code>
<code>echo "curl -s https://mas.to/api/v1/accounts/109308492833993188/statuses?limit=1 | jq -r '.[] | .media_attachments[] | select(.description != null) | .description'" >> ~/.bashrc</code></p><p>For fish-shell users, a minor modification is needed due to <a href=https://fishshell.com/docs/current/language.html#wildcards-globbing>wildcards-globbing</a>. Your <code>~/.config/fish/functions/fish_greeting.fish</code> should have a backward slash to escape the questionmark in the <code>curl</code> command, like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#66d9ef>function</span> fish_greeting
</span></span><span style=display:flex><span><span style=color:#75715e># Get the latest inspirational quote from @skeletor@mas.to</span>
</span></span><span style=display:flex><span>curl -s https://mas.to/api/v1/accounts/109308492833993188/statuses<span style=color:#ae81ff>\?</span>limit<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> | jq -r <span style=color:#e6db74>&#39;.[] | .media_attachments[] | select(.description != null) | .description&#39;</span>
</span></span><span style=display:flex><span>end
</span></span></code></pre></div><h2 id=potential-improvements>Potential improvements<a hidden class=anchor aria-hidden=true href=#potential-improvements>#</a></h2><p>This could be done more elegantly by having it starting as a systemD service and a corresponding timer to fetch the latest content, this would remove the risk of slowing down your session with each start-up if there is no network connectivity to the instance you&rsquo;re fetching content from.</p><p>Also, one could render the whole images in a terminal with support for that, but that is outside of scope for this implementation.</p><h2 id=known-limitations>Known limitations<a hidden class=anchor aria-hidden=true href=#known-limitations>#</a></h2><ul><li>Posts that lack an alt-text will return <code>null</code>, and the won&rsquo;t be displayed.</li><li>If the endpoint cannot be reached, it might cause a slowdown on the startup of the terminal session.</li></ul><p><em>Thanks to @karin@hachyderm.io who made a <a href=https://khendrikse.netlify.app/blog/find-your-mastodon-account-id>post</a> on how to find account IDs on Mastodon</em>.</p><h2 id=resources>Resources<a hidden class=anchor aria-hidden=true href=#resources>#</a></h2><ul><li><a href=https://docs.joinmastodon.org/client/public/#posts>Mastodon API-documentation</a></li><li><a href=https://khendrikse.netlify.app/blog/find-your-mastodon-account-id/>How to find account ID</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/mastodon/>Mastodon</a></li><li><a href=http://localhost:1313/tags/cli/>CLI</a></li><li><a href=http://localhost:1313/tags/inspiration/>Inspiration</a></li></ul></footer></article></main><footer class=footer><section class=container><p><a href="https://fediring.net/previous?host=khalid.se">←</a>
<a href=https://fediring.net/>Fediring</a>
<a href="https://fediring.net/next?host=khalid.se">→</a></p></section></footer></body></html>